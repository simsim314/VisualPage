<!DOCTYPE html>
<html>
<body>

<script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js@1.0.0-beta.34/dist/web3.min.js"></script>
<script src="ethereumjs-tx-1.3.3.min.js"></script>

<script>
function getWeb3()
{
	return new Web3(new Web3.providers.HttpProvider('HTTPS://ropsten.infura.io/v3/ba911465f37f446c9af8006fcbb74075'))
	//return new Web3(new Web3.providers.HttpProvider('HTTP://127.0.0.1:7545'));
}

function Send(ether_amount, sender_prk, sender_pbk, reciever_pbk)
{
	var web3 = getWeb3();

	web3.eth.getTransactionCount(sender_pbk, (err, txCount) => {

	const txObject = {
		nonce:    (txCount),
		gasLimit: web3.utils.toHex(300000), // Raise the gas limit to a much higher amount
		gasPrice: web3.utils.toHex(web3.utils.toWei('15', 'gwei')),
		to: reciever_pbk,
		value: web3.utils.toHex(web3.utils.toWei(ether_amount, 'ether'))
	};

	const tx = new ethereumjs.Tx(txObject);
	
	console.log(sender_prk);
	sender_prk = ethereumjs.Buffer.Buffer.from(sender_prk, 'hex')
	
	tx.sign(sender_prk);

	const serializedTx = tx.serialize();
	const raw = '0x' + serializedTx.toString('hex');
	
	web3.eth.sendSignedTransaction(raw, (err, txHash) => {
	console.log('err:', err, 'txHash:', txHash)
	});
});
}

function printbalance(walletAddress)
{
	var web3 = getWeb3();	
	var balance = web3.eth.getBalance(walletAddress); //Will give value in.
	console.log(walletAddress, balance)
}

Send('0.01', '340580a254a5caa554c45037cbca26b854f00178e2addf55370bf98ba447084c', '0xEae88cDb500517B7FFd857059A77629ACE4C7aa8', '0xA178f309911Ede304987f8110AE2C5414479ecCb');

walletAddress = '0xEae88cDb500517B7FFd857059A77629ACE4C7aa8';
printbalance(walletAddress)

walletAddress = '0xA178f309911Ede304987f8110AE2C5414479ecCb';
printbalance(walletAddress)

</script>
</body>
</html>
